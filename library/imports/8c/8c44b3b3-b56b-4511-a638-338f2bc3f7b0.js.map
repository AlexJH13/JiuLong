{"version":3,"sources":["assets/Script/MainMenu.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,4EAA4E;AAC5E,mBAAmB;AACnB,sFAAsF;AACtF,8BAA8B;AAC9B,sFAAsF;;;;;;;;;;;;;;;;;;;;;AAEhF,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAsC,4BAAY;IAAlD;QAAA,qEAsIC;QAnIG,UAAI,GAAmB,IAAI,CAAC;;IAmIhC,CAAC;IAhIG,wBAAwB;IAExB,eAAe;IAEf,wBAAK,GAAL;IAEA,CAAC;IAED,iCAAc,GAAd,UAAe,kBAA4B;QACvC,kBAAkB;QAClB,IAAM,cAAc,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACvD,cAAc,CAAC,cAAc,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;QAC1C,cAAc,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAC7E,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC;QAC7B,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QAEhD,YAAY;QACZ,IAAM,YAAY,GAAG,EAAE,CAAC,CAAC,QAAQ;QACjC,IAAM,QAAQ,GAAc,EAAE,CAAC;QAE/B,UAAU;QACV,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,EAAE,CAAC,EAAE,EAAE;YACnC,IAAM,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9C,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC;YAClB,OAAO,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CACpB,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,GAAG,EAC9C,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,CAClD,CAAC;YACF,OAAO,CAAC,KAAK,GAAG,IAAI,EAAE,CAAC,KAAK,CACxB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,GAAG,GAAG,EAAE,QAAQ;YAC/C,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,EAAS,QAAQ;YAC/C,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAS,QAAQ;aAClD,CAAC;YACF,cAAc,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;YACjC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC1B;QAED,SAAS;QACT,IAAM,OAAO,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC/C,IAAM,QAAQ,GAAG,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;QACjD,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC;QACjC,QAAQ,CAAC,QAAQ,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;QAC9C,OAAO,CAAC,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC;QAC/B,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,GAAG,EAAE,EAAE,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC;QACxE,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;QACpB,cAAc,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;QAErC,SAAS;QACT,aAAa;QACb,IAAI,aAAa,GAAG,CAAC,CAAC;QACtB,QAAQ,CAAC,OAAO,CAAC,UAAC,OAAO,EAAE,KAAK;YAC5B,IAAM,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC,CAAC,OAAO;YACnC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC;iBACZ,KAAK,CAAC,KAAK,CAAC;iBACZ,EAAE,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC;iBAChE,IAAI,CAAC;gBACF,aAAa,EAAE,CAAC;gBAChB,IAAI,aAAa,KAAK,YAAY,EAAE;oBAChC,YAAY;oBACZ,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC;yBACZ,EAAE,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC;yBACzB,IAAI,CAAC;wBACF,gBAAgB;wBAChB,QAAQ,CAAC,OAAO,CAAC,UAAC,GAAG,EAAE,CAAC;4BACpB,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC;iCACR,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC;iCACf,QAAQ,CACL,EAAE,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,EAChC,EAAE,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,EAAE,CAAC,CAC3D;iCACA,KAAK,EAAE,CAAC;wBACjB,CAAC,CAAC,CAAC;wBAEH,UAAU;wBACV,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC;6BACZ,KAAK,CAAC,GAAG,CAAC;6BACV,IAAI,CAAC;4BACF,iBAAiB;4BACjB,cAAc,CAAC,OAAO,EAAE,CAAC;4BACzB,IAAI,kBAAkB,EAAE;gCACpB,kBAAkB,EAAE,CAAC;6BACxB;wBACL,CAAC,CAAC;6BACD,KAAK,EAAE,CAAC;oBACjB,CAAC,CAAC;yBACD,KAAK,EAAE,CAAC;iBAChB;YACL,CAAC,CAAC;iBACD,KAAK,EAAE,CAAC;QACjB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,QAAQ;IACA,gCAAa,GAArB,UAAsB,WAA2B;QAC7C,IAAM,IAAI,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACpC,+CAA+C;QAC/C,oCAAoC;QACpC,wEAAwE;QAExE,SAAS;QACT,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;QACjB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;QAElB,oBAAoB;QACpB,IAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;QAChD,QAAQ,CAAC,SAAS,GAAG,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC;QAEpC,QAAQ;QACR,IAAM,MAAM,GAAG,EAAE,CAAC,CAAC,QAAQ;QAC3B,IAAM,SAAS,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;QAC9B,QAAQ,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YACzB,IAAM,KAAK,GAAG,CAAC,GAAG,SAAS,CAAC;YAC5B,QAAQ,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;SACvE;QACD,QAAQ,CAAC,IAAI,EAAE,CAAC;QAEhB,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,0BAAO,GAAP,UAAQ,KAA0B,EAAE,IAAY;QAC5C,IAAI,IAAI,KAAK,OAAO,EAAE;YAClB,gBAAgB;YAChB,IAAI,CAAC,cAAc,CAAC;gBAChB,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAlID;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;0CACG;IAHX,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAsI5B;IAAD,eAAC;CAtID,AAsIC,CAtIqC,EAAE,CAAC,SAAS,GAsIjD;kBAtIoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class MainMenu extends cc.Component {\n\n    @property(cc.SpriteFrame)\n    cell: cc.SpriteFrame = null;\n\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {}\n\n    start () {\n\n    }\n\n    showTransition(transitionComplete: ()=>void): void {\n        // 创建一个全屏的节点作为转场容器\n        const transitionNode = new cc.Node('TransitionEffect');\n        transitionNode.setContentSize(cc.winSize);\n        transitionNode.position = cc.v3(cc.winSize.width / 2, cc.winSize.height / 2);\n        transitionNode.zIndex = 9999;\n        cc.director.getScene().addChild(transitionNode);\n        \n        // 创建六边形图案效果\n        const hexagonCount = 50; // 六边形数量\n        const hexagons: cc.Node[] = [];\n        \n        // 创建多个六边形\n        for (let i = 0; i < hexagonCount; i++) {\n            const hexagon = this.createHexagon(this.cell);\n            hexagon.scale = 0;\n            hexagon.position = cc.v3(\n                (Math.random() - 0.5) * cc.winSize.width * 0.8,\n                (Math.random() - 0.5) * cc.winSize.height * 0.8\n            );\n            hexagon.color = new cc.Color(\n                Math.floor(Math.random() * 100) + 155, // 较亮的红色\n                Math.floor(Math.random() * 50),        // 较暗的绿色\n                Math.floor(Math.random() * 50)         // 较暗的蓝色\n            );\n            transitionNode.addChild(hexagon);\n            hexagons.push(hexagon);\n        }\n        \n        // 创建黑色背景\n        const blackBg = new cc.Node('BlackBackground');\n        const bgSprite = blackBg.addComponent(cc.Sprite);\n        bgSprite.spriteFrame = this.cell;\n        bgSprite.sizeMode = cc.Sprite.SizeMode.CUSTOM;\n        blackBg.color = cc.Color.BLACK;\n        blackBg.setContentSize(cc.winSize.width * 1.5, cc.winSize.height * 1.5);\n        blackBg.opacity = 0;\n        transitionNode.addChild(blackBg, -1);\n        \n        // 播放动画序列\n        // 1. 六边形放大动画\n        let finishedCount = 0;\n        hexagons.forEach((hexagon, index) => {\n            const delay = index * 0.02; // 错开时间\n            cc.tween(hexagon)\n                .delay(delay)\n                .to(0.5, { scale: 5 + Math.random() * 3 }, { easing: 'backOut' })\n                .call(() => {\n                    finishedCount++;\n                    if (finishedCount === hexagonCount) {\n                        // 2. 黑色背景淡入\n                        cc.tween(blackBg)\n                            .to(0.8, { opacity: 255 })\n                            .call(() => {\n                                // 3. 六边形旋转并缩小消失\n                                hexagons.forEach((hex, i) => {\n                                    cc.tween(hex)\n                                        .delay(i * 0.01)\n                                        .parallel(\n                                            cc.tween().to(0.5, { scale: 0 }),\n                                            cc.tween().by(0.5, { angle: 180 + Math.random() * 180 })\n                                        )\n                                        .start();\n                                });\n                                \n                                // 4. 完成转场\n                                cc.tween(blackBg)\n                                    .delay(0.6)\n                                    .call(() => {\n                                        // 动画完成，销毁节点并调用回调\n                                        transitionNode.destroy();\n                                        if (transitionComplete) {\n                                            transitionComplete();\n                                        }\n                                    })\n                                    .start();\n                            })\n                            .start();\n                    }\n                })\n                .start();\n        });\n    }\n    \n    // 创建六边形\n    private createHexagon(spriteFrame: cc.SpriteFrame): cc.Node {\n        const node = new cc.Node('Hexagon');\n        // const sprite = node.addComponent(cc.Sprite);\n        // sprite.spriteFrame = spriteFrame;\n        // sprite.sizeMode = cc.Sprite.SizeMode.CUSTOM; // 设置为CUSTOM以便正确处理1*1的纹理\n        \n        // 设置节点大小\n        node.width = 100;\n        node.height = 100;\n        \n        // 使用Graphics组件绘制六边形\n        const graphics = node.addComponent(cc.Graphics);\n        graphics.fillColor = cc.Color.WHITE;\n        \n        // 绘制六边形\n        const radius = 50; // 六边形半径\n        const angleStep = Math.PI / 3;\n        graphics.moveTo(radius * Math.cos(0), radius * Math.sin(0));\n        for (let i = 1; i <= 6; i++) {\n            const angle = i * angleStep;\n            graphics.lineTo(radius * Math.cos(angle), radius * Math.sin(angle));\n        }\n        graphics.fill();\n        \n        return node;\n    }\n\n    onClick(event: cc.Event.EventTouch, data: string): void{\n        if (data === 'start') {\n            // 播放转场动画，然后切换场景\n            this.showTransition(() => {\n                cc.director.loadScene('GameScene');\n            });\n        }\n    }\n}\n\n"]}